@model CabinWebsite_Application.Models.CalendarModel

<h2>Calendar</h2>
<div class="row">



    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-xs-8 col-xs-offset-2">
                <h1>Cabin Calendar</h1>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <h2 id="add-item-title" class="text-center">Add a New Reservation</h2>

            <!-- 
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                if (!ViewData.ModelState.IsValid)
                {
                    <div class="validation-summary-errors panel panel-danger"
                        data-valmsg-summary="true">
                        <div class="panel-heading">
                            <center><strong>Cannot add this Story. Please try again later</strong></center>
                        </div>
                    </div><br />
                }
                

                @{
                    DayOfWeek[] day_of_week = {DayOfWeek.Monday, DayOfWeek.Tuesday, DayOfWeek.Wednesday, DayOfWeek.Thursday, DayOfWeek.Friday, DayOfWeek.Saturday, DayOfWeek.Sunday};
                    string[] row = new string[7];
                    string[] month_of_year = { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
                
                
                    var year = DateTime.Now.Year;
                    var month = DateTime.Now.Month;
                    string monthYearStr = month.ToString() + year.ToString();
                    int monthLen = DateTime.DaysInMonth(year, month);
                    DateTime startDate = new DateTime(year, month, 1);
                    var startDay = startDate.DayOfWeek;
                

                    int[] week = new int[7];
                

                    //string month = month_of_year[Model.date.Month + 1];

                    string mess;

                    int counter = 1;
                    bool dateReached = false;
                }


                <p>The month is: @month</p>
                <p>The year is: @year</p>
                <p>The monthYearStr day is: @monthYearStr</p>
            
                <table border="1" style="width:100%">
                    <tr>
                        <th>Mon</th>
                        <th>Tue</th>
                        <th>Wed</th>
                        <th>Thu</th>
                        <th>Fri</th>
                        <th>Sat</th>
                        <th>Sun</th>
                    </tr>
                    
                    
                    @for (int i = 0; i < 5; i++)
                    {
                        //
                        for (int j = 0; j < 7; j++)
                        {
                            if (i == 0 && day_of_week[j] == startDay)
                            {
                                dateReached = true;
                                row[j] = counter.ToString();
                                counter++;
                            }
                            else
                            {
                                if (dateReached && counter <= monthLen)
                                {
                                    row[j] = counter.ToString();
                                    counter++;
                                }
                                else
                                {
                                    row[j] = "";
                                }

                            }

                        }
                        <tr>
                            @for (int k = 0; k < 7; k++)
                            {
                                if (!row[k].Equals(""))
                                {
                                    int dayOfMonth = Int32.Parse(row[k]);
                                    DateTime reserveDate = new DateTime(year, month, dayOfMonth);
                                    if (Model.myReservedDates.Count >= 1)
                                    {
                                        foreach (var item in Model.myReservedDates)
                                        {
                                            <p>@row[k]</p>
                                            <p>Reserved by @item.userFirstName @item.userLastName</p>
                                            <p>@Html.CheckBox("Cancel", new Dictionary<string, object> { { "id", reserveDate.ToString("YYYYMMDD") } })</p>
                                        
                                        }
                                    }
                                    else if (Model.myReservedDates.Count >= 1)
                                    {
                                        foreach (var item in Model.myReservedDates)
                                        {
                                            <p>@row[k]</p>
                                            <p>Reserved by @item.userFirstName @item.userLastName</p>
                                        }
                                    }
                                    else
                                    {
                                        <th>
                                            <p>@row[k]</p>
                                            <p>@Html.CheckBox("Reserve", new Dictionary<string, object> { { "id", reserveDate.ToString("YYYYMMDD") } })
                                        </th>
                                    }
                                }
                                else
                                {
                                    <th>@row[k]</th>
                                }
                            }
                        
                        </tr>
                    }

                </table>

                <br />
                <div class="row">
                    <div class="form-group">
                        <div class="col-lg-12 col-md-12 col-xs-12" style="text-align:center;">
                            <button class="btn btn-primary" type="submit" value="Submit">Submit</button>
                            <button class="btn btn-default" onclick="confirmBack()">Cancel</button>
                        </div>
                    </div>
                </div>
            }
            -->

            <!--
                <center>
                    <script language="javascript" type="text/javascript">
                        var day_of_week = new Array('Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');
                        var month_of_year = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December');

                        //  DECLARE AND INITIALIZE VARIABLES
                        var Calendar = new Date();

                        var year = Calendar.getFullYear();     // Returns year
                        var month = Calendar.getMonth();    // Returns month (0-11)
                        var today = Calendar.getDate();    // Returns day (1-31)
                        var weekday = Calendar.getDay();    // Returns day (1-31)

                        var DAYS_OF_WEEK = 7;    // "constant" for number of days in a week
                        var DAYS_OF_MONTH = 31;    // "constant" for number of days in a month
                        var cal;    // Used for printing

                        Calendar.setDate(1);    // Start the calendar day at '1'
                        Calendar.setMonth(month);    // Start the calendar month at now


                        /* VARIABLES FOR FORMATTING
                        NOTE: You can format the 'BORDER', 'BGCOLOR', 'CELLPADDING', 'BORDERCOLOR'
                              tags to customize your caledanr's look. */

                        var TR_start = '<TR>';
                        var TR_end = '</TR>';
                        var highlight_start = '<TD WIDTH="30"><TABLE CELLSPACING=0 BORDER=1 BGCOLOR=DEDEFF BORDERCOLOR=CCCCCC><TR><TD WIDTH=20><B><CENTER>';
                        var highlight_end = '</CENTER></TD></TR></TABLE></B>';
                        var TD_start = '<TD WIDTH="30"><CENTER>';
                        var TD_end = '</CENTER></TD>';

                        /* BEGIN CODE FOR CALENDAR
                        NOTE: You can format the 'BORDER', 'BGCOLOR', 'CELLPADDING', 'BORDERCOLOR'
                        tags to customize your calendar's look.*/

                        cal = '<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=0 BORDERCOLOR=BBBBBB><TR><TD>';
                        cal += '<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=2>' + TR_start;
                        cal += '<TD COLSPAN="' + DAYS_OF_WEEK + '" BGCOLOR="#EFEFEF"><CENTER><B>';
                        cal += month_of_year[month] + '   ' + year + '</B>' + TD_end + TR_end;
                        cal += TR_start;

                        //   DO NOT EDIT BELOW THIS POINT  //

                        // LOOPS FOR EACH DAY OF WEEK
                        for (index = 0; index < DAYS_OF_WEEK; index++) {

                            // BOLD TODAY'S DAY OF WEEK
                            if (weekday == index)
                                cal += TD_start + '<B>' + day_of_week[index] + '</B>' + TD_end;

                                // PRINTS DAY
                            else
                                cal += TD_start + day_of_week[index] + TD_end;
                        }

                        cal += TD_end + TR_end;
                        cal += TR_start;

                        // FILL IN BLANK GAPS UNTIL TODAY'S DAY
                        for (index = 0; index < Calendar.getDay() ; index++)
                            cal += TD_start + '  ' + TD_end;

                        // LOOPS FOR EACH DAY IN CALENDAR
                        for (index = 0; index < DAYS_OF_MONTH; index++) {
                            if (Calendar.getDate() > index) {
                                // RETURNS THE NEXT DAY TO PRINT
                                week_day = Calendar.getDay();

                                // START NEW ROW FOR FIRST DAY OF WEEK
                                if (week_day == 0)
                                    cal += TR_start;

                                if (week_day != DAYS_OF_WEEK) {

                                    // SET VARIABLE INSIDE LOOP FOR INCREMENTING PURPOSES
                                    var day = Calendar.getDate();

                                    // HIGHLIGHT TODAY'S DATE
                                    if (today == Calendar.getDate())
                                        cal += highlight_start + day + highlight_end + TD_end;

                                        // PRINTS DAY
                                    else
                                        cal += TD_start + day + TD_end;
                                }

                                // END ROW FOR LAST DAY OF WEEK
                                if (week_day == DAYS_OF_WEEK)
                                    cal += TR_end;
                            }

                            // INCREMENTS UNTIL END OF THE MONTH
                            Calendar.setDate(Calendar.getDate() + 1);

                        }// end for loop

                        cal += '</TD></TR></TABLE></TABLE>';

                        //  PRINT CALENDAR
                        document.write(cal);

                        //  End --
                    </script>
                </center>
                <br /><div style="clear:both"></div><div><a target="_blank" href="http://www.htmlbestcodes.com/"><span style="font-size: 8pt; text-decoration: none">HTML Best Codes</span></a></div>

            -->

        </div>

    </div>
</div>

